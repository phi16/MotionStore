<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Haste.Concurrent</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Haste-Concurrent.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Haste.Concurrent</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Concurrency for Haste. Includes MVars, forking, Ajax and more.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:MVar">MVar</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:CIO">CIO</a> a</li><li class="src short"><span class="keyword">class</span> <a href="#t:ToConcurrent">ToConcurrent</a> a <span class="keyword">where</span><ul class="subs"><li><span class="keyword">type</span> <a href="#t:Async">Async</a> a</li></ul></li><li class="src short"><span class="keyword">class</span> Monad m &#8658; <a href="#t:MonadConc">MonadConc</a> m <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><a href="#v:forkIO">forkIO</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> ()</li><li class="src short"><a href="#v:forkMany">forkMany</a> &#8759; [<a href="Haste-Concurrent.html#t:CIO">CIO</a> ()] &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> ()</li><li class="src short"><a href="#v:newMVar">newMVar</a> &#8759; MonadIO m &#8658; a &#8594; m (<a href="Haste-Concurrent.html#t:MVar">MVar</a> a)</li><li class="src short"><a href="#v:newEmptyMVar">newEmptyMVar</a> &#8759; MonadIO m &#8658; m (<a href="Haste-Concurrent.html#t:MVar">MVar</a> a)</li><li class="src short"><a href="#v:takeMVar">takeMVar</a> &#8759; <a href="Haste-Concurrent.html#t:MVar">MVar</a> a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a</li><li class="src short"><a href="#v:putMVar">putMVar</a> &#8759; <a href="Haste-Concurrent.html#t:MVar">MVar</a> a &#8594; a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> ()</li><li class="src short"><a href="#v:withMVarIO">withMVarIO</a> &#8759; <a href="Haste-Concurrent.html#t:MVar">MVar</a> a &#8594; (a &#8594; IO b) &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b</li><li class="src short"><a href="#v:peekMVar">peekMVar</a> &#8759; MonadIO m &#8658; <a href="Haste-Concurrent.html#t:MVar">MVar</a> a &#8594; m (Maybe a)</li><li class="src short"><a href="#v:modifyMVarIO">modifyMVarIO</a> &#8759; <a href="Haste-Concurrent.html#t:MVar">MVar</a> a &#8594; (a &#8594; IO (a, b)) &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b</li><li class="src short"><a href="#v:readMVar">readMVar</a> &#8759; <a href="Haste-Concurrent.html#t:MVar">MVar</a> a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a</li><li class="src short"><a href="#v:concurrent">concurrent</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () &#8594; IO ()</li><li class="src short"><a href="#v:liftIO">liftIO</a> &#8759; MonadIO m &#8658; &#8704; a. IO a &#8594; m a</li><li class="src short"><span class="keyword">data</span> <a href="#t:Recv">Recv</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Send">Send</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Inbox">Inbox</a> = <a href="Haste-Concurrent.html#t:MBox">MBox</a> <a href="Haste-Concurrent.html#t:Recv">Recv</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Outbox">Outbox</a> = <a href="Haste-Concurrent.html#t:MBox">MBox</a> <a href="Haste-Concurrent.html#t:Send">Send</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:MBox">MBox</a> t a</li><li class="src short"><a href="#v:receive">receive</a> &#8759; <a href="Haste-Concurrent.html#t:MonadConc">MonadConc</a> m &#8658; <a href="Haste-Concurrent.html#t:Inbox">Inbox</a> a &#8594; m a</li><li class="src short"><a href="#v:spawn">spawn</a> &#8759; <a href="Haste-Concurrent.html#t:MonadConc">MonadConc</a> m &#8658; (<a href="Haste-Concurrent.html#t:Inbox">Inbox</a> a &#8594; m ()) &#8594; m (<a href="Haste-Concurrent.html#t:Outbox">Outbox</a> a)</li><li class="src short"><a href="#v:statefully">statefully</a> &#8759; <a href="Haste-Concurrent.html#t:MonadConc">MonadConc</a> m &#8658; st &#8594; (st &#8594; evt &#8594; m (Maybe st)) &#8594; m (<a href="Haste-Concurrent.html#t:Outbox">Outbox</a> evt)</li><li class="src short"><a href="#v:-33-">(!)</a> &#8759; <a href="Haste-Concurrent.html#t:MonadConc">MonadConc</a> m &#8658; <a href="Haste-Concurrent.html#t:Outbox">Outbox</a> a &#8594; a &#8594; m ()</li><li class="src short"><a href="#v:-60--33-">(&lt;!)</a> &#8759; <a href="Haste-Concurrent.html#t:MonadConc">MonadConc</a> m &#8658; <a href="Haste-Concurrent.html#t:Outbox">Outbox</a> a &#8594; m a &#8594; m ()</li><li class="src short"><a href="#v:wait">wait</a> &#8759; Int &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MVar" class="def">MVar</a> a <a href="#t:MVar" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CIO" class="def">CIO</a> a <a href="#t:CIO" class="selflink">#</a></p><div class="doc"><p>Concurrent IO monad. The normal IO monad does not have concurrency
   capabilities with Haste. This monad is basically IO plus concurrency.</p></div><div class="subs instances"><p id="control.i:CIO" class="caption collapser" onclick="toggleSection('i:CIO')">Instances</p><div id="section.i:CIO" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CIO:Monad:1" class="instance expander" onclick="toggleSection('i:id:CIO:Monad:1')"></span> Monad <a href="Haste-Concurrent.html#t:CIO">CIO</a></span> <a href="#t:CIO" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CIO:Monad:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a &#8594; (a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b) &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b</p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b</p><p class="src"><a href="#v:return">return</a> &#8759; a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a</p><p class="src"><a href="#v:fail">fail</a> &#8759; String &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CIO:Functor:2" class="instance expander" onclick="toggleSection('i:id:CIO:Functor:2')"></span> Functor <a href="Haste-Concurrent.html#t:CIO">CIO</a></span> <a href="#t:CIO" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CIO:Functor:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> &#8759; (a &#8594; b) &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b</p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> &#8759; a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CIO:Applicative:3" class="instance expander" onclick="toggleSection('i:id:CIO:Applicative:3')"></span> Applicative <a href="Haste-Concurrent.html#t:CIO">CIO</a></span> <a href="#t:CIO" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CIO:Applicative:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> &#8759; a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a</p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> (a &#8594; b) &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b</p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b</p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CIO:MonadIO:4" class="instance expander" onclick="toggleSection('i:id:CIO:MonadIO:4')"></span> MonadIO <a href="Haste-Concurrent.html#t:CIO">CIO</a></span> <a href="#t:CIO" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CIO:MonadIO:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftIO">liftIO</a> &#8759; IO a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a <a href="#v:liftIO" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CIO:MonadEvent:5" class="instance expander" onclick="toggleSection('i:id:CIO:MonadEvent:5')"></span> <a href="Haste-Events.html#t:MonadEvent">MonadEvent</a> <a href="Haste-Concurrent.html#t:CIO">CIO</a></span> <a href="#t:CIO" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CIO:MonadEvent:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mkHandler">mkHandler</a> &#8759; (a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> ()) &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> (a &#8594; IO ()) <a href="#v:mkHandler" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CIO:MonadCont:6" class="instance expander" onclick="toggleSection('i:id:CIO:MonadCont:6')"></span> MonadCont <a href="Haste-Concurrent.html#t:CIO">CIO</a></span> <a href="#t:CIO" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CIO:MonadCont:6" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:callCC">callCC</a> &#8759; ((a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b) &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a) &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CIO:MonadConc:7" class="instance expander" onclick="toggleSection('i:id:CIO:MonadConc:7')"></span> <a href="Haste-Concurrent.html#t:MonadConc">MonadConc</a> <a href="Haste-Concurrent.html#t:CIO">CIO</a></span> <a href="#t:CIO" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CIO:MonadConc:7" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftConc">liftConc</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a <a href="#v:liftConc" class="selflink">#</a></p><p class="src"><a href="#v:fork">fork</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () <a href="#v:fork" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CIO:MonadBlob:8" class="instance expander" onclick="toggleSection('i:id:CIO:MonadBlob:8')"></span> <a href="Haste-Binary.html#t:MonadBlob">MonadBlob</a> <a href="Haste-Concurrent.html#t:CIO">CIO</a></span> <a href="#t:MonadBlob" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CIO:MonadBlob:8" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getBlobData">getBlobData</a> &#8759; <a href="Haste-Binary.html#t:Blob">Blob</a> &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> <a href="Haste-Binary.html#t:BlobData">BlobData</a> <a href="#v:getBlobData" class="selflink">#</a></p><p class="src"><a href="#v:getBlobText-39-">getBlobText'</a> &#8759; <a href="Haste-Binary.html#t:Blob">Blob</a> &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> <a href="Haste-Prim.html#t:JSString">JSString</a> <a href="#v:getBlobText-39-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CIO:ToConcurrent:9" class="instance expander" onclick="toggleSection('i:id:CIO:ToConcurrent:9')"></span> <a href="Haste-Concurrent.html#t:ToConcurrent">ToConcurrent</a> (<a href="Haste-Concurrent.html#t:CIO">CIO</a> ())</span> <a href="#t:CIO" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CIO:ToConcurrent:9" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Haste-Concurrent.html#t:Async">Async</a> (<a href="Haste-Concurrent.html#t:CIO">CIO</a> ()) &#8759; &#9733; <a href="#t:Async" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:async">async</a> &#8759; <a href="Haste-Concurrent.html#t:Async">Async</a> (<a href="Haste-Concurrent.html#t:CIO">CIO</a> ()) &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () <a href="#v:async" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CIO:Async:10" class="instance expander" onclick="toggleSection('i:id:CIO:Async:10')"></span> <span class="keyword">type</span> <a href="Haste-Concurrent.html#t:Async">Async</a> (<a href="Haste-Concurrent.html#t:CIO">CIO</a> ())</span> <a href="#t:CIO" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CIO:Async:10" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="Haste-Concurrent.html#t:Async">Async</a> (<a href="Haste-Concurrent.html#t:CIO">CIO</a> ()) = <a href="Haste-Concurrent.html#t:CIO">CIO</a> ()</div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:ToConcurrent" class="def">ToConcurrent</a> a <span class="keyword">where</span> <a href="#t:ToConcurrent" class="selflink">#</a></p><div class="doc"><p>Embed concurrent computations into non-concurrent ones.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Haste-Concurrent.html#v:async">async</a></p></div><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a id="t:Async" class="def">Async</a> a <a href="#t:Async" class="selflink">#</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:async" class="def">async</a> &#8759; <a href="Haste-Concurrent.html#t:Async">Async</a> a &#8594; a <a href="#v:async" class="selflink">#</a></p></div><div class="subs instances"><p id="control.i:ToConcurrent" class="caption collapser" onclick="toggleSection('i:ToConcurrent')">Instances</p><div id="section.i:ToConcurrent" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:ToConcurrent:ToConcurrent:1" class="instance expander" onclick="toggleSection('i:ic:ToConcurrent:ToConcurrent:1')"></span> <a href="Haste-Concurrent.html#t:ToConcurrent">ToConcurrent</a> (IO ())</span> <a href="#t:ToConcurrent" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:ToConcurrent:ToConcurrent:1" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Haste-Concurrent.html#t:Async">Async</a> (IO ()) &#8759; &#9733; <a href="#t:Async" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:async">async</a> &#8759; <a href="Haste-Concurrent.html#t:Async">Async</a> (IO ()) &#8594; IO () <a href="#v:async" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:ToConcurrent:ToConcurrent:2" class="instance expander" onclick="toggleSection('i:ic:ToConcurrent:ToConcurrent:2')"></span> <a href="Haste-Concurrent.html#t:ToConcurrent">ToConcurrent</a> (<a href="Haste-Concurrent.html#t:CIO">CIO</a> ())</span> <a href="#t:ToConcurrent" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:ToConcurrent:ToConcurrent:2" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Haste-Concurrent.html#t:Async">Async</a> (<a href="Haste-Concurrent.html#t:CIO">CIO</a> ()) &#8759; &#9733; <a href="#t:Async" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:async">async</a> &#8759; <a href="Haste-Concurrent.html#t:Async">Async</a> (<a href="Haste-Concurrent.html#t:CIO">CIO</a> ()) &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () <a href="#v:async" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:ToConcurrent:ToConcurrent:3" class="instance expander" onclick="toggleSection('i:ic:ToConcurrent:ToConcurrent:3')"></span> <a href="Haste-Concurrent.html#t:ToConcurrent">ToConcurrent</a> b &#8658; <a href="Haste-Concurrent.html#t:ToConcurrent">ToConcurrent</a> (a &#8594; b)</span> <a href="#t:ToConcurrent" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:ToConcurrent:ToConcurrent:3" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="Haste-Concurrent.html#t:Async">Async</a> (a &#8594; b) &#8759; &#9733; <a href="#t:Async" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:async">async</a> &#8759; <a href="Haste-Concurrent.html#t:Async">Async</a> (a &#8594; b) &#8594; a &#8594; b <a href="#v:async" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> Monad m &#8658; <a id="t:MonadConc" class="def">MonadConc</a> m <span class="keyword">where</span> <a href="#t:MonadConc" class="selflink">#</a></p><div class="doc"><p>Any monad which supports concurrency.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Haste-Concurrent.html#v:liftConc">liftConc</a>, <a href="Haste-Concurrent.html#v:fork">fork</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:liftConc" class="def">liftConc</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a &#8594; m a <a href="#v:liftConc" class="selflink">#</a></p><p class="src"><a id="v:fork" class="def">fork</a> &#8759; m () &#8594; m () <a href="#v:fork" class="selflink">#</a></p></div><div class="subs instances"><p id="control.i:MonadConc" class="caption collapser" onclick="toggleSection('i:MonadConc')">Instances</p><div id="section.i:MonadConc" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadConc:MonadConc:1" class="instance expander" onclick="toggleSection('i:ic:MonadConc:MonadConc:1')"></span> <a href="Haste-Concurrent.html#t:MonadConc">MonadConc</a> <a href="Haste-Concurrent.html#t:CIO">CIO</a></span> <a href="#t:MonadConc" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:MonadConc:MonadConc:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftConc">liftConc</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a <a href="#v:liftConc" class="selflink">#</a></p><p class="src"><a href="#v:fork">fork</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () <a href="#v:fork" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadConc:MonadConc:2" class="instance expander" onclick="toggleSection('i:ic:MonadConc:MonadConc:2')"></span> <a href="Haste-Concurrent.html#t:MonadConc">MonadConc</a> <a href="Core-World.html#t:World">World</a></span> <a href="#t:MonadConc" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:MonadConc:MonadConc:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftConc">liftConc</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a &#8594; <a href="Core-World.html#t:World">World</a> a <a href="#v:liftConc" class="selflink">#</a></p><p class="src"><a href="#v:fork">fork</a> &#8759; <a href="Core-World.html#t:World">World</a> () &#8594; <a href="Core-World.html#t:World">World</a> () <a href="#v:fork" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:forkIO" class="def">forkIO</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () <a href="#v:forkIO" class="selflink">#</a></p><div class="doc"><p>Spawn a new thread.</p></div></div><div class="top"><p class="src"><a id="v:forkMany" class="def">forkMany</a> &#8759; [<a href="Haste-Concurrent.html#t:CIO">CIO</a> ()] &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () <a href="#v:forkMany" class="selflink">#</a></p><div class="doc"><p>Spawn several threads at once.</p></div></div><div class="top"><p class="src"><a id="v:newMVar" class="def">newMVar</a> &#8759; MonadIO m &#8658; a &#8594; m (<a href="Haste-Concurrent.html#t:MVar">MVar</a> a) <a href="#v:newMVar" class="selflink">#</a></p><div class="doc"><p>Create a new MVar with an initial value.</p></div></div><div class="top"><p class="src"><a id="v:newEmptyMVar" class="def">newEmptyMVar</a> &#8759; MonadIO m &#8658; m (<a href="Haste-Concurrent.html#t:MVar">MVar</a> a) <a href="#v:newEmptyMVar" class="selflink">#</a></p><div class="doc"><p>Create a new empty MVar.</p></div></div><div class="top"><p class="src"><a id="v:takeMVar" class="def">takeMVar</a> &#8759; <a href="Haste-Concurrent.html#t:MVar">MVar</a> a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a <a href="#v:takeMVar" class="selflink">#</a></p><div class="doc"><p>Read an MVar. Blocks if the MVar is empty.
   Only the first writer in the write queue, if any, is woken.</p></div></div><div class="top"><p class="src"><a id="v:putMVar" class="def">putMVar</a> &#8759; <a href="Haste-Concurrent.html#t:MVar">MVar</a> a &#8594; a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () <a href="#v:putMVar" class="selflink">#</a></p><div class="doc"><p>Write an MVar. Blocks if the MVar is already full.
   Only the first reader in the read queue, if any, is woken.</p></div></div><div class="top"><p class="src"><a id="v:withMVarIO" class="def">withMVarIO</a> &#8759; <a href="Haste-Concurrent.html#t:MVar">MVar</a> a &#8594; (a &#8594; IO b) &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b <a href="#v:withMVarIO" class="selflink">#</a></p><div class="doc"><p>Perform an IO action over an MVar.</p></div></div><div class="top"><p class="src"><a id="v:peekMVar" class="def">peekMVar</a> &#8759; MonadIO m &#8658; <a href="Haste-Concurrent.html#t:MVar">MVar</a> a &#8594; m (Maybe a) <a href="#v:peekMVar" class="selflink">#</a></p><div class="doc"><p>Peek at the value inside a given MVar, if any, without removing it.</p></div></div><div class="top"><p class="src"><a id="v:modifyMVarIO" class="def">modifyMVarIO</a> &#8759; <a href="Haste-Concurrent.html#t:MVar">MVar</a> a &#8594; (a &#8594; IO (a, b)) &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> b <a href="#v:modifyMVarIO" class="selflink">#</a></p><div class="doc"><p>Perform an IO action over an MVar, then write the MVar back.</p></div></div><div class="top"><p class="src"><a id="v:readMVar" class="def">readMVar</a> &#8759; <a href="Haste-Concurrent.html#t:MVar">MVar</a> a &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> a <a href="#v:readMVar" class="selflink">#</a></p><div class="doc"><p>Read an MVar then put it back. As Javascript is single threaded, this
   function is atomic. If this ever changes, this function will only be
   atomic as long as no other thread attempts to write to the MVar.</p></div></div><div class="top"><p class="src"><a id="v:concurrent" class="def">concurrent</a> &#8759; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () &#8594; IO () <a href="#v:concurrent" class="selflink">#</a></p><div class="doc"><p>Run a concurrent computation. Two different concurrent computations may
   share MVars; if this is the case, then a call to <code><a href="Haste-Concurrent.html#v:concurrent">concurrent</a></code> may return
   before all the threads it spawned finish executing.</p></div></div><div class="top"><p class="src"><a id="v:liftIO" class="def">liftIO</a> &#8759; MonadIO m &#8658; &#8704; a. IO a &#8594; m a <a href="#v:liftIO" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Recv" class="def">Recv</a> <a href="#t:Recv" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Send" class="def">Send</a> <a href="#t:Send" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Inbox" class="def">Inbox</a> = <a href="Haste-Concurrent.html#t:MBox">MBox</a> <a href="Haste-Concurrent.html#t:Recv">Recv</a> <a href="#t:Inbox" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Outbox" class="def">Outbox</a> = <a href="Haste-Concurrent.html#t:MBox">MBox</a> <a href="Haste-Concurrent.html#t:Send">Send</a> <a href="#t:Outbox" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MBox" class="def">MBox</a> t a <a href="#t:MBox" class="selflink">#</a></p><div class="doc"><p>An MBox is a read/write-only MVar, depending on its first type parameter.
   Used to communicate with server processes.</p></div></div><div class="top"><p class="src"><a id="v:receive" class="def">receive</a> &#8759; <a href="Haste-Concurrent.html#t:MonadConc">MonadConc</a> m &#8658; <a href="Haste-Concurrent.html#t:Inbox">Inbox</a> a &#8594; m a <a href="#v:receive" class="selflink">#</a></p><div class="doc"><p>Block until a message arrives in a mailbox, then return it.</p></div></div><div class="top"><p class="src"><a id="v:spawn" class="def">spawn</a> &#8759; <a href="Haste-Concurrent.html#t:MonadConc">MonadConc</a> m &#8658; (<a href="Haste-Concurrent.html#t:Inbox">Inbox</a> a &#8594; m ()) &#8594; m (<a href="Haste-Concurrent.html#t:Outbox">Outbox</a> a) <a href="#v:spawn" class="selflink">#</a></p><div class="doc"><p>Creates a generic process and returns a MBox which may be used to pass
   messages to it.
   While it is possible for a process created using spawn to transmit its
   inbox to someone else, this is a very bad idea; don't do it.</p></div></div><div class="top"><p class="src"><a id="v:statefully" class="def">statefully</a> &#8759; <a href="Haste-Concurrent.html#t:MonadConc">MonadConc</a> m &#8658; st &#8594; (st &#8594; evt &#8594; m (Maybe st)) &#8594; m (<a href="Haste-Concurrent.html#t:Outbox">Outbox</a> evt) <a href="#v:statefully" class="selflink">#</a></p><div class="doc"><p>Creates a generic stateful process. This process is a function taking a
   state and an event argument, returning an updated state or Nothing.
   <code>statefully</code> creates a <code>MBox</code> that is used to pass events to the process.
   Whenever a value is written to this MBox, that value is passed to the
   process function together with the function's current state.
   If the process function returns Nothing, the process terminates.
   If it returns a new state, the process again blocks on the event MBox,
   and will use the new state to any future calls to the server function.</p></div></div><div class="top"><p class="src"><a id="v:-33-" class="def">(!)</a> &#8759; <a href="Haste-Concurrent.html#t:MonadConc">MonadConc</a> m &#8658; <a href="Haste-Concurrent.html#t:Outbox">Outbox</a> a &#8594; a &#8594; m () <a href="#v:-33-" class="selflink">#</a></p><div class="doc"><p>Write a value to a MBox. Named after the Erlang message sending operator,
   as both are intended for passing messages to processes.
   This operation does not block until the message is delivered, but returns
   immediately.</p></div></div><div class="top"><p class="src"><a id="v:-60--33-" class="def">(&lt;!)</a> &#8759; <a href="Haste-Concurrent.html#t:MonadConc">MonadConc</a> m &#8658; <a href="Haste-Concurrent.html#t:Outbox">Outbox</a> a &#8594; m a &#8594; m () <a href="#v:-60--33-" class="selflink">#</a></p><div class="doc"><p>Perform a Client computation, then write its return value to the given
   pipe. Mnemonic: the operator is a combination of &lt;- and !.
   Just like <code>(!)</code>, this operation is non-blocking.</p></div></div><div class="top"><p class="src"><a id="v:wait" class="def">wait</a> &#8759; Int &#8594; <a href="Haste-Concurrent.html#t:CIO">CIO</a> () <a href="#v:wait" class="selflink">#</a></p><div class="doc"><p>Wait for n milliseconds.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>